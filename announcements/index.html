<!DOCTYPE html><html><head><meta charSet="utf-8"/><meta http-equiv="x-ua-compatible" content="ie=edge"/><meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no"/><meta property="twitter:card" content="summary_large_image"/><link rel="shortcut icon" type="image/svg" href="/favicon.ico"/><link rel="stylesheet" href="https://maxcdn.bootstrapcdn.com/bootstrap/3.3.7/css/bootstrap.min.css" integrity="sha384-BVYiiSIFeK1dGmJRAkycuHAHRg32OmUcww7on3RYdg4Va+PmSTsz/K68vbdEjh4u" crossorigin="anonymous"/><link rel="stylesheet" href="https://maxcdn.bootstrapcdn.com/font-awesome/4.7.0/css/font-awesome.min.css"/><script src="https://code.jquery.com/jquery-3.3.1.min.js" integrity="sha256-FgpCb/KJQlLNfOu91ta32o/NMZxltwRo8QtmkMRdAu8=" crossorigin="anonymous"></script><script src="https://maxcdn.bootstrapcdn.com/bootstrap/3.3.7/js/bootstrap.min.js" integrity="sha384-Tc5IQib027qvyjSMfHjOMaLkfuWVxZxUPnCJA7l2mCWNIpG9mGCD8wGNIcPD7Txa" crossorigin="anonymous"></script><style data-href="/styles.77455b07fb53608dd214.css">@import url(https://fonts.googleapis.com/css?family=Roboto:300,400,500,700);body{font-family:Roboto}.video-responsive{position:relative;padding-bottom:56.2%}.video-responsive iframe{position:absolute;width:100%;height:100%}.diffNewLine{color:#22863a;background-color:#f0fff4}.diffRemoveLine{color:red;background-color:#fcc}.githubIcon{width:15px;margin-right:5px}.githubSection{display:flex;align-items:center;color:#000;opacity:.7}.githubSection:hover{text-decoration:none;opacity:1}.navbar-default .navbar-toggle .icon-bar{background-color:#fff!important}.navbar-default .navbar-toggle:focus,.navbar-default .navbar-toggle:hover{background-color:#542683}.headerWrapper{display:flex;align-items:center}.navBarCollapse{flex:1 1}.logoWrapper{padding:21px 0 21px 20px}.logoContent{font-family:Roboto;margin-left:16px;font-size:28px;line-height:1.5;font-weight:500;padding-right:10px}.navBarDefault{background-color:#372476;border-radius:0;margin-bottom:0;border:0;z-index:1;padding:15px}.navBarBrand,.navBarDefault{display:flex;align-items:center}.navBarBrand{height:auto;font-size:28px;line-height:1.5;font-weight:500;color:#fff!important;padding:0}.navBarBrand img{width:40px;margin-right:16px;display:inline-block}.navBarUL li a{font-family:Roboto;color:#fff!important;font-size:16px;font-weight:500;line-height:1em;opacity:1}.navBarUL{display:flex;align-items:center}.navBarUL li a img{width:20px}.mainWrapper{color:#3b454e;max-width:900px}.navBarUL li a:hover{opacity:.7}pre{border:0!important;background-color:#f5f7f9 /* !important; */}.mainWrapper ol,.mainWrapper ul{-webkit-padding-start:40px;-moz-padding-start:40px;-o-padding-start:40px;margin:24px 0;padding:0 0 0 2em}.mainWrapper ol li,.mainWrapper ul li{font-size:16px;line-height:1.8;font-weight:400}.headerNav{font-family:Roboto;padding:0 24px;color:#744cbc;font-size:16px;font-weight:500;line-height:1em}.headerNav a{color:#744cbc}.headerNav a,.headerNav a:hover{text-decoration:none}.logoWrapper img{width:40px}.sideBarUL{margin-top:32px;white-space:nowrap}.sideBarUL li{list-style-type:none;width:100%}.sideBarUL li a{font-size:14px;font-weight:500;line-height:1.5;padding:7px 24px 7px 16px;border:1px solid transparent;border-right:0}.rightSideTitle{font-size:10px;line-height:1;font-weight:700;text-transform:uppercase;letter-spacing:1.2px;padding:7px 24px 7px 16px;border-left:1px solid #e6ecf1;color:#9daab6}.rightSideBarUL{margin-top:32px}.rightSideBarUL li{list-style-type:none;border-left:1px solid #e6ecf1}.rightSideBarUL li a{font-size:12px;font-weight:500;line-height:1.5;padding:7px 24px 7px 16px}.subLevel{margin-left:16px;border-left:1px solid #e6ecf1;padding:7px 24px 7px 16px;width:calc(100% - 16px)!important}.subLevel:hover{background-color:#542683}.subLevel a{line-height:1.5;color:#fff;font-size:14px;font-weight:500;text-decoration:none;padding:0!important;display:block}.subLevel.active{color:#744cbc;border-color:#e6ecf1!important;border-style:solid none solid solid;border-width:1px 0 1px 1px;background-color:#fff}.subLevel.active a{color:#744cbc}.titleWrapper{display:flex;align-items:center;padding-bottom:40px;border-bottom:1px solid #e6ecf1;margin-bottom:32px}.title{font-size:32px;line-height:1.5;font-weight:500;border-left:2px solid #744cbc;flex:1 1;margin-top:0;padding:0 16px}.gitBtn{height:30px;min-height:30px;display:flex;align-items:center}.gitBtn img{width:15px;display:inline-block;margin-right:5px}.addPaddTopBottom{padding:50px 0}.nextPreviousWrapper{margin:0;padding:0;width:auto;display:grid;grid-template-rows:auto;-webkit-column-gap:24px;-moz-column-gap:24px;column-gap:24px;grid-template-columns:calc(50% - 8px) calc(50% - 8px)}.previousBtn{cursor:pointer;-moz-box-align:center;margin:0;padding:0;position:relative;display:flex;flex-direction:row;align-items:center;place-self:stretch;color:#242a31;background-color:#fff;border-radius:3px;border:1px solid #e6ecf1;transition:border .2s ease 0s;box-shadow:0 3px 8px 0 rgba(116,129,141,.1);text-decoration:none}.leftArrow{color:#9daab6;flex:0 0 auto;font-size:24px;transition:color .2s ease 0s}.leftArrow,.preRightWrapper{display:block;margin:0;padding:16px}.preRightWrapper{flex:1 1;text-align:right}.smallContent{display:block;margin:0;padding:0;color:#9daab6}.smallContent span{font-size:12px;line-height:1.625;font-weight:400}.nextPreviousTitle{display:block;margin:0;padding:0;transition:color .2s ease 0s}.nextPreviousTitle span{font-size:16px;line-height:1.5;font-weight:500}.nextBtn{cursor:pointer;-moz-box-align:center;margin:0;padding:0;position:relative;display:flex;flex-direction:row;align-items:center;place-self:stretch;color:#242a31;background-color:#fff;border-radius:3px;border:1px solid #e6ecf1;transition:border .2s ease 0s;box-shadow:0 3px 8px 0 rgba(116,129,141,.1);text-decoration:none}.rightArrow{flex:0 0 auto;font-size:24px;transition:color .2s ease 0s;color:#9daab6}.nextRightWrapper,.rightArrow{padding:16px;display:block;margin:0}.nextRightWrapper{flex:1 1}.nextBtn:hover,.previousBtn:hover{color:#744cbc;text-decoration:none;border:1px solid #744cbc}.nextBtn:hover .rightArrow,.previousBtn:hover .leftArrow{color:#744cbc}table,table tr{padding:0}table tr{border-top:1px solid #ccc;background-color:#fff;margin:0}table tr:nth-child(2n){background-color:#f8f8f8}table tr th{font-weight:700}table tr td,table tr th{border:1px solid #ccc;text-align:left;margin:0;padding:6px 13px}table tr td :first-child,table tr th :first-child{margin-top:0}table tr td :last-child,table tr th :last-child{margin-bottom:0}img{max-width:100%}.githubBtn{display:flex;align-items:center;font-size:16px;padding:10px 15px}@media (max-width:767px){hr{margin-top:0;margin-bottom:0}.navbar-collapse{padding-left:0;padding-right:0}.navBarUL{display:flex;padding-left:16px;align-items:center}.navBarUL li a{font-size:14px}.navBarDefault{display:block}.navBarToggle{margin-top:15px}.navBarBrand{font-size:20px;padding:15px}.titleWrapper{padding:0 15px;display:block}.mobileView{text-align:center!important}.gitBtn{display:inline-block}.mainWrapper{padding:0 15px}.nextPreviousWrapper{display:block;padding:0 15px}.previousBtn{margin-bottom:20px}.mobileView{text-align:left!important;padding-left:0!important}}.sponsor{color:pink;color:#aaa;font-size:13px;float:right}@media (max-width:767px){.sponsor{float:left;padding-left:15px}}.sponsor-name{color:#fff}span.code{font-family:Courier New,Courier,monospace}.footer{padding-top:20px}.beat{animation:beat .25s infinite alternate;transform-origin:center}@keyframes beat{to{transform:scale(1.4)}}.sponsors{display:flex;margin-bottom:30px}.sponsors .sponsor{flex:1 1 auto}</style><meta name="generator" content="Gatsby 2.13.23"/><style data-emotion-css="19ovwfk 1wwbgvg mq3d4a jk8k4y 17hslul mrz1a6 2x76ca 1do55sm 16j4zvd 1cyu0d5 1ig3yiy 1vcvnke kgl18x trsm9o jehsw0 hf8i38 65wmf5 1pvw5s9 om68wv 1ximx1l w2y2np">*{margin:0;padding:0;box-sizing:border-box;}html,body{font-family:-apple-system, BlinkMacSystemFont, "Segoe UI", "Roboto", "Roboto Light", "Oxygen", "Ubuntu", "Cantarell", "Fira Sans", "Droid Sans", "Helvetica Neue", sans-serif, "Apple Color Emoji", "Segoe UI Emoji", "Segoe UI Symbol";font-size:16px;}a{-webkit-transition:color 0.15s;transition:color 0.15s;color:#663399;}.css-1wwbgvg{width:100%;height:100vh;overflow:auto;position:fixed;position:-webkit-sticky;position:-moz-sticky;position:-webkit-sticky;position:sticky;top:0;padding-right:0;background-color:#372476;background:linear-gradient(#372476,#3b173b);background:-webkit-gradient(linear,0% 0%,0% 100%,from(#372476),to(#3b173b));background:-webkit-linear-gradient(top,#372476,#3b173b);background:-moz-linear-gradient(top,#372476,#3b173b);background:-ms-linear-gradient(top,#372476,#3b173b);background:-o-linear-gradient(top,#372476,#3b173b);}@media only screen and (max-width:767px){.css-1wwbgvg{padding-left:0px;background-color:#372476;background:#372476;}}@media (min-width:767px) and (max-width:1023px){.css-1wwbgvg{padding-left:0;}}@media only screen and (max-width:1023px){.css-1wwbgvg{width:100%;position:relative;height:auto;}}.css-mq3d4a{list-style:none;}.css-mq3d4a a{color:#fff;-webkit-text-decoration:none;text-decoration:none;font-weight:700;padding:0.45rem 0 0.45rem 2rem;display:block;position:relative;}.css-mq3d4a a:hover{background-color:#542683;}.css-mq3d4a a svg{float:right;margin-right:1rem;}.css-jk8k4y{color:white;padding-left:1rem;font-weight:lighter;font-size:14px;padding:0.45rem 0 0.45rem 1rem;cursor:default;}.css-17hslul{list-style:none;padding:0.5rem 0;}.css-17hslul hr{margin:0;padding:0;border:0;border-bottom:1px solid #ede7f3;}.css-mrz1a6{display:-webkit-box;display:-webkit-flex;display:-ms-flexbox;display:flex;-webkit-box-pack:justify;-webkit-justify-content:space-between;-ms-flex-pack:justify;justify-content:space-between;}@media only screen and (max-width:767px){.css-mrz1a6{display:block;}}.css-2x76ca{width:298px;}.css-1do55sm{display:-webkit-box;display:-webkit-flex;display:-ms-flexbox;display:flex;-webkit-box-flex:1;-webkit-flex-grow:1;-ms-flex-positive:1;flex-grow:1;margin:0px 88px;margin-top:3rem;}@media only screen and (max-width:1023px){.css-1do55sm{padding-left:0;margin:0 10px;margin-top:3rem;}}@media only screen and (max-width:50rem){.css-16j4zvd{width:100%;position:relative;}}.css-1cyu0d5{padding:1rem 1.5rem;text-align:right;}.css-1cyu0d5 a{font-size:14px;font-weight:500;line-height:1em;-webkit-text-decoration:none;text-decoration:none;color:#555;border:1px solid rgb(211,220,228);cursor:pointer;border-radius:3px;-webkit-transition:all 0.2s ease-out 0s;transition:all 0.2s ease-out 0s;-webkit-text-decoration:none;text-decoration:none;color:rgb(36,42,49);background-color:rgb(255,255,255);box-shadow:rgba(116,129,141,0.1) 0px 1px 1px 0px;height:30px;padding:5px 16px;}.css-1cyu0d5 a:hover{background-color:rgb(245,247,249);}.css-1ig3yiy{width:224px;}.css-1vcvnke{width:100%;background-color:#fff;border-right:1px solid #ede7f3;height:100vh;overflow:auto;position:fixed;padding-left:24px;position:-webkit-sticky;position:-moz-sticky;position:-webkit-sticky;position:sticky;top:0;}@media only screen and (max-width:50rem){.css-1vcvnke{width:100%;position:relative;}}.css-kgl18x{margin:0px;margin-bottom:32px;margin-top:16px;line-height:1.625;}.css-trsm9o{background:#f9f7fb;border:1px solid #ede7f3;border-radius:4px;padding:2px 6px;font-size:0.9375em;}.css-jehsw0{font-size:24px;font-weight:700;line-height:1.5;margin-bottom:16px;margin-top:32px;}.css-hf8i38{font-size:20px;font-weight:700;line-height:1.5;margin-bottom:16px;margin-top:32px;}.css-65wmf5{font-size:14px;margin:0px;overflow:auto;}.css-1pvw5s9{font-size:14px;margin:0px;padding:16px;overflow:auto;}.css-om68wv{list-style:none;}.css-om68wv a{color:#5C6975;-webkit-text-decoration:none;text-decoration:none;font-weight:400;padding:0.45rem 0 0.45rem 3rem;display:block;position:relative;}.css-om68wv a:hover{color:rgb(116,76,188) !important;}.css-om68wv a svg{float:right;margin-right:1rem;}.css-1ximx1l{list-style:none;}.css-1ximx1l a{color:#fff;-webkit-text-decoration:none;text-decoration:none;font-weight:700;padding:0.45rem 0 0.45rem 2rem;display:block;position:relative;color:#fff;background-color:#473485;}.css-1ximx1l a:hover{background-color:#542683;}.css-1ximx1l a svg{float:right;margin-right:1rem;}.css-w2y2np{font-size:16px;font-weight:700;line-height:1.5;margin-bottom:16px;margin-top:32px;}</style><link rel="sitemap" type="application/xml" href="/sitemap.xml"/><title data-react-helmet="true">Announcements | EOPI-JS</title><link data-react-helmet="true" rel="canonical" href="https://node-postgres.com/announcements"/><meta data-react-helmet="true" name="title" content="Announcements"/><meta data-react-helmet="true" property="og:title" content="Announcements"/><meta data-react-helmet="true" property="twitter:title" content="Announcements"/><script async="" src="https://www.googletagmanager.com/gtag/js?id=UA-100138145-1"></script><script>
    window.GATSBY_GTAG_PLUGIN_GA_TRACKING_ID = (
      'UA-100138145-1'
    );
    window.GATSBY_GTAG_PLUGIN_ANONYMIZE = false;

    var options = {
      send_page_view: false
    };
    if (false) {
      options.anonymize_ip = true;
    }

    window.dataLayer = window.dataLayer || [];
    function gtag(){dataLayer.push(arguments);}
    window.gtag = gtag;
    gtag('js', new Date());
    gtag('config', 'UA-100138145-1', options);
  </script><link as="script" rel="preload" href="/app-26a6e9f9154084b7a827.js"/><link as="script" rel="preload" href="/styles-51758cceccc934d7ff6d.js"/><link as="script" rel="preload" href="/webpack-runtime-80e6b5f9417a5a27a5ae.js"/><link as="fetch" rel="preload" href="/page-data/announcements/page-data.json" crossorigin="use-credentials"/></head><body><div id="___gatsby"><div style="outline:none" tabindex="-1" role="group" id="gatsby-focus-wrapper"><div><div class="navBarWrapper"><nav class="navbar navbar-default navBarDefault"><div class="navbar-header"><button type="button" class="navbar-toggle collapsed navBarToggle" data-toggle="collapse" data-target="#navbar" aria-expanded="false" aria-controls="navbar"><span class="sr-only">Toggle navigation</span><span class="icon-bar"></span><span class="icon-bar"></span><span class="icon-bar"></span></button><div style="display:flex;flex-direction:column"><a class="navbar-brand navBarBrand" href="/">EOPI-JS</a></div></div><div id="navbar" class="navbar-collapse collapse navBarCollapse"><div class="visible-xs"><aside class="css-1wwbgvg"><ul class="sideBarUL"><li class="css-mq3d4a"><a href="/">Welcome</a></li><li class="css-1ximx1l"><a aria-current="page" class="" href="/announcements">Announcements</a></li><li class="css-jk8k4y">Features</li><li class="subLevel "><a href="/features/connecting">Connecting</a></li><li class="subLevel "><a href="/features/queries">Queries</a></li><li class="subLevel "><a href="/features/pooling">Pooling</a></li><li class="subLevel "><a href="/features/transactions">Transactions</a></li><li class="subLevel "><a href="/features/types">Data Types</a></li><li class="subLevel "><a href="/features/ssl">SSL</a></li><li class="subLevel "><a href="/features/native">Native Bindings</a></li><li class="css-jk8k4y">Guides</li><li class="subLevel "><a href="/guides/project-structure">Suggested Project Structure</a></li><li class="subLevel "><a href="/guides/async-express">Express with async/await</a></li><li class="subLevel "><a href="/guides/upgrading">Upgrading</a></li><li class="css-jk8k4y">API</li><li class="subLevel "><a href="/api/pool">pg.Pool</a></li><li class="subLevel "><a href="/api/client">pg.Client</a></li><li class="subLevel "><a href="/api/result">pg.Result</a></li><li class="subLevel "><a href="/api/types">Types</a></li><li class="subLevel "><a href="/api/cursor">pg.Cursor</a></li><li class="css-17hslul"><hr/></li></ul></aside><hr/></div><ul class="nav navbar-nav navBarUL"><li class="githubBtn"><span><a href="https://github.com/brianc/node-postgres" data-show-count="true" aria-label="Star on GitHub">Star</a></span></li></ul><ul class="nav navbar-nav navBarUL navbar-right"><li><a href="https://github.com/sponsors/brianc" target="_blank" rel="noreferrer">❤️ Sponsor</a></li></ul></div></nav></div><div class="css-mrz1a6"><div class="hidden-xs css-2x76ca"><aside class="css-1wwbgvg"><ul class="sideBarUL"><li class="css-mq3d4a"><a href="/">Welcome</a></li><li class="css-1ximx1l"><a aria-current="page" class="" href="/announcements">Announcements</a></li><li class="css-jk8k4y">Features</li><li class="subLevel "><a href="/features/connecting">Connecting</a></li><li class="subLevel "><a href="/features/queries">Queries</a></li><li class="subLevel "><a href="/features/pooling">Pooling</a></li><li class="subLevel "><a href="/features/transactions">Transactions</a></li><li class="subLevel "><a href="/features/types">Data Types</a></li><li class="subLevel "><a href="/features/ssl">SSL</a></li><li class="subLevel "><a href="/features/native">Native Bindings</a></li><li class="css-jk8k4y">Guides</li><li class="subLevel "><a href="/guides/project-structure">Suggested Project Structure</a></li><li class="subLevel "><a href="/guides/async-express">Express with async/await</a></li><li class="subLevel "><a href="/guides/upgrading">Upgrading</a></li><li class="css-jk8k4y">API</li><li class="subLevel "><a href="/api/pool">pg.Pool</a></li><li class="subLevel "><a href="/api/client">pg.Client</a></li><li class="subLevel "><a href="/api/result">pg.Result</a></li><li class="subLevel "><a href="/api/types">Types</a></li><li class="subLevel "><a href="/api/cursor">pg.Cursor</a></li><li class="css-17hslul"><hr/></li></ul></aside></div><main class="css-1do55sm"><div class="css-16j4zvd"><div class="titleWrapper"><h1 class="title">Announcements</h1><div class="mobileView css-1cyu0d5"><a href="https://github.com/brianc/node-postgres-docs/tree/master/content/announcements.mdx" class="gitBtn"><img src="data:image/svg+xml;base64,PD94bWwgdmVyc2lvbj0iMS4wIiBlbmNvZGluZz0idXRmLTgiPz4NCjwhLS0gR2VuZXJhdG9yOiBBZG9iZSBJbGx1c3RyYXRvciAyMi4xLjAsIFNWRyBFeHBvcnQgUGx1Zy1JbiAuIFNWRyBWZXJzaW9uOiA2LjAwIEJ1aWxkIDApICAtLT4NCjxzdmcgdmVyc2lvbj0iMS4yIiBiYXNlUHJvZmlsZT0idGlueSIgaWQ9IkxheWVyXzEiIHhtbG5zPSJodHRwOi8vd3d3LnczLm9yZy8yMDAwL3N2ZyIgeG1sbnM6eGxpbms9Imh0dHA6Ly93d3cudzMub3JnLzE5OTkveGxpbmsiDQoJIHg9IjBweCIgeT0iMHB4IiB2aWV3Qm94PSIwIDAgMjM1MCAyMzE0LjgiIHhtbDpzcGFjZT0icHJlc2VydmUiPg0KPHBhdGggZD0iTTExNzUsMEM1MjUuOCwwLDAsNTI1LjgsMCwxMTc1YzAsNTUyLjIsMzc4LjksMTAxMC41LDg5MC4xLDExMzkuN2MtNS45LTE0LjctOC44LTM1LjMtOC44LTU1Ljh2LTE5OS44SDczNC40DQoJYy03OS4zLDAtMTUyLjgtMzUuMi0xODUuMS05OS45Yy0zOC4yLTcwLjUtNDQuMS0xNzkuMi0xNDEtMjQ2LjhjLTI5LjQtMjMuNS01LjktNDcsMjYuNC00NC4xYzYxLjcsMTcuNiwxMTEuNiw1OC44LDE1OC42LDEyMC40DQoJYzQ3LDYxLjcsNjcuNiw3Ni40LDE1NS43LDc2LjRjNDEuMSwwLDEwNS43LTIuOSwxNjQuNS0xMS44YzMyLjMtODIuMyw4OC4xLTE1NS43LDE1NS43LTE5MC45Yy0zOTMuNi00Ny01ODEuNi0yNDAuOS01ODEuNi01MDUuMw0KCWMwLTExNC42LDQ5LjktMjIzLjMsMTMyLjItMzE3LjNjLTI2LjQtOTEuMS02MS43LTI3OS4xLDExLjgtMzUyLjVjMTc2LjMsMCwyODIsMTE0LjYsMzA4LjQsMTQzLjljODguMS0yOS40LDE4NS4xLTQ3LDI4NC45LTQ3DQoJYzEwMi44LDAsMTk2LjgsMTcuNiwyODQuOSw0N2MyNi40LTI5LjQsMTMyLjItMTQzLjksMzA4LjQtMTQzLjljNzAuNSw3MC41LDM4LjIsMjYxLjQsOC44LDM1Mi41YzgyLjMsOTEuMSwxMjkuMywyMDIuNywxMjkuMywzMTcuMw0KCWMwLDI2NC40LTE4NS4xLDQ1OC4zLTU3NS43LDQ5OS40YzEwOC43LDU1LjgsMTg1LjEsMjE0LjQsMTg1LjEsMzMxLjlWMjI1NmMwLDguOC0yLjksMTcuNi0yLjksMjYuNA0KCUMyMDIxLDIxMjMuOCwyMzUwLDE2ODkuMSwyMzUwLDExNzVDMjM1MCw1MjUuOCwxODI0LjIsMCwxMTc1LDBMMTE3NSwweiIvPg0KPC9zdmc+DQo=" alt="Github logo"/> Edit on GitHub</a></div></div><div class="mainWrapper"><h2 id="2020-02-25" style="position:relative" class="css-jehsw0">2020-02-25</h2><h3 id="pg80-release" style="position:relative" class="css-hf8i38">pg@8.0 release</h3><p class="css-kgl18x"><code class="css-trsm9o">pg@8.0</code> is <a href="https://github.com/brianc/node-postgres/pull/2117" target="_blank">being released</a> which contains a handful of breaking changes.</p><p class="css-kgl18x">I will outline each breaking change here and try to give some historical context on them.  Most of them are small and subtle and likely wont impact you; <strong>however</strong>, there is one larger breaking change you will likely run into:</p><hr/><h4 id="support-all-tlsconnect-options-being-passed-to-the-clientpool-constructor-under-the-ssl-option" style="position:relative" class="css-w2y2np">Support all <code class="css-trsm9o">tls.connect</code> <a href="https://nodejs.org/api/tls.html#tls_tls_connect_options_callback" target="_blank">options</a> being passed to the client/pool constructor under the <code class="css-trsm9o">ssl</code> option.</h4><p class="css-kgl18x">Previously we white listed the parameters passed here and did slight massaging of some of them.  The main <strong>breaking</strong> change here is that now if you do this:</p><pre class="css-65wmf5"><pre class="prism-code language-javascript css-1pvw5s9" style="color:#9CDCFE;background-color:#1E1E1E"><div class="token-line"><span class="token keyword" style="color:rgb(86, 156, 214)">const</span><span class="token plain"> client </span><span class="token operator" style="color:rgb(212, 212, 212)">=</span><span class="token plain"> </span><span class="token keyword" style="color:rgb(86, 156, 214)">new</span><span class="token plain"> </span><span class="token class-name" style="color:rgb(78, 201, 176)">Client</span><span class="token punctuation" style="color:rgb(212, 212, 212)">(</span><span class="token punctuation" style="color:rgb(212, 212, 212)">{</span><span class="token plain"> ssl</span><span class="token punctuation" style="color:rgb(212, 212, 212)">:</span><span class="token plain"> </span><span class="token boolean">true</span><span class="token plain"> </span><span class="token punctuation" style="color:rgb(212, 212, 212)">}</span><span class="token punctuation" style="color:rgb(212, 212, 212)">)</span><span class="token plain"></span></div></pre></pre><div class="alert alert-danger" style="margin-top:20px">Now we will use the default ssl options to tls.connect which includes rejectUnauthorized being enabled.  This means your connection attempt may fail if you are using a self-signed cert.  To use the old behavior you should do this:</div><pre class="css-65wmf5"><pre class="prism-code language-javascript css-1pvw5s9" style="color:#9CDCFE;background-color:#1E1E1E"><div class="token-line"><span class="token keyword" style="color:rgb(86, 156, 214)">const</span><span class="token plain"> client </span><span class="token operator" style="color:rgb(212, 212, 212)">=</span><span class="token plain"> </span><span class="token keyword" style="color:rgb(86, 156, 214)">new</span><span class="token plain"> </span><span class="token class-name" style="color:rgb(78, 201, 176)">Client</span><span class="token punctuation" style="color:rgb(212, 212, 212)">(</span><span class="token punctuation" style="color:rgb(212, 212, 212)">{</span><span class="token plain"> ssl</span><span class="token punctuation" style="color:rgb(212, 212, 212)">:</span><span class="token plain"> </span><span class="token punctuation" style="color:rgb(212, 212, 212)">{</span><span class="token plain"> rejectUnauthorized</span><span class="token punctuation" style="color:rgb(212, 212, 212)">:</span><span class="token plain"> </span><span class="token boolean">false</span><span class="token plain"> </span><span class="token punctuation" style="color:rgb(212, 212, 212)">}</span><span class="token plain"> </span><span class="token punctuation" style="color:rgb(212, 212, 212)">}</span><span class="token punctuation" style="color:rgb(212, 212, 212)">)</span><span class="token plain"></span></div></pre></pre><p class="css-kgl18x">This makes pg a bit more secure &quot;out of the box&quot; while still enabling you to opt in to the old behavior.</p><hr/><p class="css-kgl18x">The rest of the changes are relatively minor &amp; you likely wont need to do anything, but good to be aware none the less!</p><h4 id="change-default-database-name" style="position:relative" class="css-w2y2np">change default database name</h4><p class="css-kgl18x">If a database name is not specified, available in the environment at <code class="css-trsm9o">PGDATABASE</code>, or available at <code class="css-trsm9o">pg.defaults</code>, we used to use the username of the process user as the name of the database. Now we will use the <code class="css-trsm9o">user</code> property supplied to the client as the database name, if it exists. What this means is this:</p><pre class="css-65wmf5"><pre class="prism-code language-javascript css-1pvw5s9" style="color:#9CDCFE;background-color:#1E1E1E"><div class="token-line"><span class="token keyword" style="color:rgb(86, 156, 214)">new</span><span class="token plain"> </span><span class="token class-name" style="color:rgb(78, 201, 176)">Client</span><span class="token punctuation" style="color:rgb(212, 212, 212)">(</span><span class="token punctuation" style="color:rgb(212, 212, 212)">{</span><span class="token plain"></span></div><div class="token-line"><span class="token plain">  user</span><span class="token punctuation" style="color:rgb(212, 212, 212)">:</span><span class="token plain"> </span><span class="token string" style="color:rgb(206, 145, 120)">&#x27;foo&#x27;</span><span class="token plain"></span></div><div class="token-line"><span class="token plain"></span><span class="token punctuation" style="color:rgb(212, 212, 212)">}</span><span class="token punctuation" style="color:rgb(212, 212, 212)">)</span><span class="token plain"></span></div></pre></pre><p class="css-kgl18x"><code class="css-trsm9o">pg@7.x</code> will default the database name to the <em>process</em> user. <code class="css-trsm9o">pg@8.x</code> will use the <code class="css-trsm9o">user</code> property supplied to the client. If you have not supplied <code class="css-trsm9o">user</code> to the client, and it isn&#x27;t available through any of its existing lookup mechanisms (environment variables, pg.defaults) then it will still use the process user for the database name.</p><h4 id="drop-support-for-versions-of-node-older-than-80" style="position:relative" class="css-w2y2np">drop support for versions of node older than 8.0</h4><p class="css-kgl18x">Node@6.0 has been out of LTS for quite some time now, and I&#x27;ve removed it from our test matrix.  <code class="css-trsm9o">pg@8.0</code> <em>may</em> still work on older versions of node, but it isn&#x27;t a goal of the project anymore.  Node@8.0 is actually no longer in the LTS support line, but pg will continue to test against and support 8.0 until there is a compelling reason to drop support for it.  Any security vulnerability issues which come up I will back-port fixes to the <code class="css-trsm9o">pg@7.x</code> line and do a release, but any other fixes or improvments will not be back ported.</p><h4 id="prevent-password-from-being-logged-accidentally" style="position:relative" class="css-w2y2np">prevent password from being logged accidentally</h4><p class="css-kgl18x"><code class="css-trsm9o">pg@8.0</code> makes the password field on the pool and client non-enumerable.  This means when you do <code class="css-trsm9o">console.log(client)</code> you wont have your database password printed out unintenionally.  You can still do <code class="css-trsm9o">console.log(client.password)</code> if you really want to see it!</p><h4 id="make-pgnative-non-enumerable" style="position:relative" class="css-w2y2np">make <code class="css-trsm9o">pg.native</code> non-enumerable</h4><p class="css-kgl18x">You can use <code class="css-trsm9o">pg.native.Client</code> to access the native client.  The first time you access the <code class="css-trsm9o">pg.native</code> getter it imports the native bindings...which must be installed.  In some cases (such as webpacking the pg code for lambda deployment) the <code class="css-trsm9o">.native</code> property would be traversed and trigger an import of the native bindings as a side-effect.  Making this property non-enumerable will fix this issue.  An easy fix, but its technically a breaking change in cases where people <em>are</em> relying on this side effect for any reason.</p><h4 id="make-pgpool-an-es6-class" style="position:relative" class="css-w2y2np">make <code class="css-trsm9o">pg.Pool</code> an es6 class</h4><p class="css-kgl18x">This makes extending <code class="css-trsm9o">pg.Pool</code> possible.  Previously it was not a &quot;proper&quot; es6 class and <code class="css-trsm9o">class MyPool extends pg.Pool</code> wouldn&#x27;t work.</p><h4 id="make-notice-messages-not-an-instance-of-a-javascript-error" style="position:relative" class="css-w2y2np">make <code class="css-trsm9o">Notice</code> messages <em>not</em> an instance of a JavaScript error</h4><p class="css-kgl18x">The code path for parsing <code class="css-trsm9o">notice</code> and <code class="css-trsm9o">error</code> messages from the postgres backend is the same.  Previously created a JavaScript <code class="css-trsm9o">Error</code> instance for <em>both</em> of these message types.  Now, only actual <code class="css-trsm9o">errors</code> from the postgres backend will be an instance of an <code class="css-trsm9o">Error</code>.  The <em>shape</em> and <em>properties</em> of the two messages did not change outside of this. </p><h4 id="monorepo" style="position:relative" class="css-w2y2np">monorepo</h4><p class="css-kgl18x">While not technically a breaking change for the module itself, I have begun the process of <a href="https://github.com/brianc/node-pg-query-stream" target="_blank">consolidating</a> <a href="https://github.com/brianc/node-pg-cursor/" target="_blank">separate</a> <a href="https://github.com/brianc/node-pg-pool" target="_blank">repos</a> into the main <a href="https://github.com/brianc/node-postgres" target="_blank">repo</a> and converted it into a monorepo managed by lerna.  This will help me stay on top of issues better (it was hard to bounce between 3-4 separate repos) and coordinate bug fixes and changes between dependant modules.</p><p class="css-kgl18x">Thanks for reading that!  pg tries to be super pedantic about not breaking backwards-compatibility in non semver major releases....even for seemingly small things.  If you ever notice a breaking change on a semver minor/patch release please stop by the <a href="https://github.com/brianc/node-postgres" target="_blank">repo</a> and open an issue!</p><p class="css-kgl18x"><em>If you find <code class="css-trsm9o">pg</code> valuable to you or your business please consider <a href="http://github.com/sponsors/brianc" target="_blank">supporting</a> it&#x27;s continued development!  Big performance improvements, typescript, better docs, query pipelining and more are all in the works!</em></p><h2 id="2019-07-18" style="position:relative" class="css-jehsw0">2019-07-18</h2><h3 id="new-documentation" style="position:relative" class="css-hf8i38">New documentation</h3><p class="css-kgl18x">After a <em>very</em> long time on my todo list I&#x27;ve ported the docs from my old hand-rolled webapp running on route53 + elb + ec2 + dokku (I know, I went overboard!) to <a href="https://www.gatsbyjs.org/" target="_blank">gatsby</a> hosted on <a href="https://www.netlify.com/" target="_blank">netlify</a> which is <em>so</em> much easier to manage.  I&#x27;ve released the code at <a href="https://github.com/brianc/node-postgres-docs" target="_blank">https://github.com/brianc/node-postgres-docs</a> and invite your contributions! Let&#x27;s make this documentation better together.  Any time changes are merged to master on the documentation repo it will automatically deploy. </p><p class="css-kgl18x">If you see an error in the docs, big or small, use the &quot;edit on github&quot; button to edit the page &amp; submit a pull request right there. I&#x27;ll get a new version out ASAP with your changes! If you want to add new pages of documentation open an issue if you need guidance, and I&#x27;ll help you get started.</p><p class="css-kgl18x">I want to extend a special <strong>thank you</strong> to all the <a href="https://github.com/brianc/node-postgres/blob/master/SPONSORS.md" target="_blank">supporters</a> and <a href="https://github.com/brianc/node-postgres/graphs/contributors" target="_blank">contributors</a> to the project that have helped keep me going through times of burnout or life &quot;getting in the way.&quot; ❤️</p><p class="css-kgl18x">It&#x27;s been quite a journey, and I look forward continuing it for as long as I can provide value to all y&#x27;all. 🤠</p><h2 id="2017-08-12" style="position:relative" class="css-jehsw0">2017-08-12</h2><h3 id="code-execution-vulnerability" style="position:relative" class="css-hf8i38">code execution vulnerability</h3><p class="css-kgl18x">Today <a href="https://github.com/sehrope" target="_blank">@sehrope</a> found and reported a code execution vulnerability in node-postgres. This affects all versions from <code class="css-trsm9o">pg@2.x</code> through <code class="css-trsm9o">pg@7.1.0</code>.</p><p class="css-kgl18x">I have published a fix on the tip of each major version branch of all affected versions as well as a fix on each minor version branch of <code class="css-trsm9o">pg@6.x</code> and <code class="css-trsm9o">pg@7.x</code>:</p><h3 id="fixes" style="position:relative" class="css-hf8i38">Fixes</h3><p class="css-kgl18x">The following versions have been published to npm &amp; contain a patch to fix the vulnerability:</p><pre class="css-65wmf5"><pre class="prism-code language-javascript css-1pvw5s9" style="color:#9CDCFE;background-color:#1E1E1E"><div class="token-line"><span class="token plain">pg@</span><span class="token number" style="color:rgb(181, 206, 168)">2.11</span><span class="token number" style="color:rgb(181, 206, 168)">.2</span><span class="token plain"></span></div><div class="token-line"><span class="token plain">pg@</span><span class="token number" style="color:rgb(181, 206, 168)">3.6</span><span class="token number" style="color:rgb(181, 206, 168)">.4</span><span class="token plain"></span></div><div class="token-line"><span class="token plain">pg@</span><span class="token number" style="color:rgb(181, 206, 168)">4.5</span><span class="token number" style="color:rgb(181, 206, 168)">.7</span><span class="token plain"></span></div><div class="token-line"><span class="token plain">pg@</span><span class="token number" style="color:rgb(181, 206, 168)">5.2</span><span class="token number" style="color:rgb(181, 206, 168)">.1</span><span class="token plain"></span></div><div class="token-line"><span class="token plain">pg@</span><span class="token number" style="color:rgb(181, 206, 168)">6.0</span><span class="token number" style="color:rgb(181, 206, 168)">.5</span><span class="token plain"></span></div><div class="token-line"><span class="token plain">pg@</span><span class="token number" style="color:rgb(181, 206, 168)">6.1</span><span class="token number" style="color:rgb(181, 206, 168)">.6</span><span class="token plain"></span></div><div class="token-line"><span class="token plain">pg@</span><span class="token number" style="color:rgb(181, 206, 168)">6.2</span><span class="token number" style="color:rgb(181, 206, 168)">.5</span><span class="token plain"></span></div><div class="token-line"><span class="token plain">pg@</span><span class="token number" style="color:rgb(181, 206, 168)">6.3</span><span class="token number" style="color:rgb(181, 206, 168)">.3</span><span class="token plain"></span></div><div class="token-line"><span class="token plain">pg@</span><span class="token number" style="color:rgb(181, 206, 168)">6.4</span><span class="token number" style="color:rgb(181, 206, 168)">.2</span><span class="token plain"></span></div><div class="token-line"><span class="token plain">pg@</span><span class="token number" style="color:rgb(181, 206, 168)">7.0</span><span class="token number" style="color:rgb(181, 206, 168)">.3</span><span class="token plain"></span></div><div class="token-line"><span class="token plain">pg@</span><span class="token number" style="color:rgb(181, 206, 168)">7.1</span><span class="token number" style="color:rgb(181, 206, 168)">.2</span><span class="token plain"></span></div></pre></pre><h3 id="example" style="position:relative" class="css-hf8i38">Example</h3><p class="css-kgl18x">To demonstrate the issue &amp; see if you are vunerable execute the following in node:</p><pre class="css-65wmf5"><pre class="prism-code language-javascript css-1pvw5s9" style="color:#9CDCFE;background-color:#1E1E1E"><div class="token-line"><span class="token keyword" style="color:rgb(86, 156, 214)">const</span><span class="token plain"> </span><span class="token punctuation" style="color:rgb(212, 212, 212)">{</span><span class="token plain"> </span><span class="token maybe-class-name">Client</span><span class="token plain"> </span><span class="token punctuation" style="color:rgb(212, 212, 212)">}</span><span class="token plain"> </span><span class="token operator" style="color:rgb(212, 212, 212)">=</span><span class="token plain"> </span><span class="token function" style="color:rgb(220, 220, 170)">require</span><span class="token punctuation" style="color:rgb(212, 212, 212)">(</span><span class="token string" style="color:rgb(206, 145, 120)">&#x27;pg&#x27;</span><span class="token punctuation" style="color:rgb(212, 212, 212)">)</span><span class="token plain"></span></div><div class="token-line"><span class="token plain"></span><span class="token keyword" style="color:rgb(86, 156, 214)">const</span><span class="token plain"> client </span><span class="token operator" style="color:rgb(212, 212, 212)">=</span><span class="token plain"> </span><span class="token keyword" style="color:rgb(86, 156, 214)">new</span><span class="token plain"> </span><span class="token class-name" style="color:rgb(78, 201, 176)">Client</span><span class="token punctuation" style="color:rgb(212, 212, 212)">(</span><span class="token punctuation" style="color:rgb(212, 212, 212)">)</span><span class="token plain"></span></div><div class="token-line"><span class="token plain">client</span><span class="token punctuation" style="color:rgb(212, 212, 212)">.</span><span class="token method function property-access" style="color:rgb(220, 220, 170)">connect</span><span class="token punctuation" style="color:rgb(212, 212, 212)">(</span><span class="token punctuation" style="color:rgb(212, 212, 212)">)</span><span class="token plain"></span></div><div class="token-line"><span class="token plain" style="display:inline-block"></span></div><div class="token-line"><span class="token plain"></span><span class="token keyword" style="color:rgb(86, 156, 214)">const</span><span class="token plain"> sql </span><span class="token operator" style="color:rgb(212, 212, 212)">=</span><span class="token plain"> </span><span class="token template-string string" style="color:rgb(206, 145, 120)">`SELECT 1 AS &quot;\\&#x27;/*&quot;, 2 AS &quot;\\&#x27;*/\n + console.log(process.env)] = null;\n//&quot;`</span><span class="token plain"></span></div><div class="token-line"><span class="token plain" style="display:inline-block"></span></div><div class="token-line"><span class="token plain">client</span><span class="token punctuation" style="color:rgb(212, 212, 212)">.</span><span class="token method function property-access" style="color:rgb(220, 220, 170)">query</span><span class="token punctuation" style="color:rgb(212, 212, 212)">(</span><span class="token plain">sql</span><span class="token punctuation" style="color:rgb(212, 212, 212)">,</span><span class="token plain"> </span><span class="token punctuation" style="color:rgb(212, 212, 212)">(</span><span class="token parameter">err</span><span class="token parameter punctuation" style="color:rgb(212, 212, 212)">,</span><span class="token parameter"> res</span><span class="token punctuation" style="color:rgb(212, 212, 212)">)</span><span class="token plain"> </span><span class="token arrow operator" style="color:rgb(212, 212, 212)">=&gt;</span><span class="token plain"> </span><span class="token punctuation" style="color:rgb(212, 212, 212)">{</span><span class="token plain"></span></div><div class="token-line"><span class="token plain">  client</span><span class="token punctuation" style="color:rgb(212, 212, 212)">.</span><span class="token method function property-access" style="color:rgb(220, 220, 170)">end</span><span class="token punctuation" style="color:rgb(212, 212, 212)">(</span><span class="token punctuation" style="color:rgb(212, 212, 212)">)</span><span class="token plain"></span></div><div class="token-line"><span class="token plain"></span><span class="token punctuation" style="color:rgb(212, 212, 212)">}</span><span class="token punctuation" style="color:rgb(212, 212, 212)">)</span><span class="token plain"></span></div></pre></pre><p class="css-kgl18x">You will see your environment variables printed to your console. An attacker can use this exploit to execute any arbitrary node code within your process.</p><h3 id="impact" style="position:relative" class="css-hf8i38">Impact</h3><p class="css-kgl18x">This vulnerability <em>likely</em> does not impact you if you are connecting to a database you control and not executing user-supplied sql. Still, you should <strong>absolutely</strong> upgrade to the most recent patch version as soon as possible to be safe.</p><p class="css-kgl18x">Two attack vectors we quickly thought of:</p><ul><li>1 - executing unsafe, user-supplied sql which contains a malicious column name like the one above.</li><li>2 - connecting to an untrusted database and executing a query which returns results where any of the column names are malicious.</li></ul><h3 id="support" style="position:relative" class="css-hf8i38">Support</h3><p class="css-kgl18x">I have created <a href="https://github.com/brianc/node-postgres/issues/1408" target="_blank">an issue</a> you can use to discuss the vulnerability with me or ask questions, and I have reported this issue <a href="https://twitter.com/briancarlson" target="_blank">on twitter</a> and directly to Heroku and <a href="https://nodesecurity.io/" target="_blank">nodesecurity.io</a>.</p><p class="css-kgl18x">I take security very seriously. If you or your company benefit from node-postgres <strong><a href="https://www.patreon.com/node_postgres" target="_blank">please sponsor my work</a></strong>: this type of issue is one of the many things I am responsible for, and I want to be able to continue to tirelessly provide a world-class PostgreSQL experience in node for years to come.</p></div><div class="addPaddTopBottom"><div class="nextPreviousWrapper"><a class="previousBtn" href="/"><div class="leftArrow"><svg preserveAspectRatio="xMidYMid meet" height="1em" width="1em" fill="none" xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" stroke="currentColor" class="_13gjrqj"><g><line x1="19" y1="12" x2="5" y2="12"></line><polyline points="12 19 5 12 12 5"></polyline></g></svg></div><div class="preRightWrapper"><div class="smallContent"><span>Previous</span></div><div class="nextPreviousTitle"><span>Welcome</span></div></div></a><a class="nextBtn" href="/features/connecting"><div class="nextRightWrapper"><div class="smallContent"><span>Next</span></div><div class="nextPreviousTitle"><span>Connecting</span></div></div><div class="rightArrow"><svg preserveAspectRatio="xMidYMid meet" height="1em" width="1em" fill="none" xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" stroke="currentColor" class="_13gjrqj"><g><line x1="5" y1="12" x2="19" y2="12"></line><polyline points="12 5 19 12 12 19"></polyline></g></svg></div></a></div></div><div class="footer text-center" style="color:#AAA;font-size:12px;padding-bottom:20px"><div class="level-item has-text-centered"><span><span>made with</span><i class="fa fa-heart " style="padding:0 5px;color:pink"></i><span style="padding-right:5px">by</span><a href="https://twitter.com/briancarlson" target="_blank">@briancarlson</a></span></div></div></div></main><div class="hidden-xs css-1ig3yiy"><aside class="css-1vcvnke"><ul class="rightSideBarUL"><div class="rightSideTitle">CONTENTS</div><li class="css-om68wv"><a href="#2020-02-25" to="#2020-02-25">2020-02-25</a></li><li class="css-om68wv"><a href="#2019-07-18" to="#2019-07-18">2019-07-18</a></li><li class="css-om68wv"><a href="#2017-08-12" to="#2017-08-12">2017-08-12</a></li></ul></aside></div></div></div></div></div><script id="gatsby-script-loader">/*<![CDATA[*/window.pagePath="/announcements";window.webpackCompilationHash="e536b55f7567f3131f54";/*]]>*/</script><script id="gatsby-chunk-mapping">/*<![CDATA[*/window.___chunkMapping={"app":["/app-26a6e9f9154084b7a827.js"],"component---src-templates-docs-js":[]};/*]]>*/</script><script src="/webpack-runtime-80e6b5f9417a5a27a5ae.js" async=""></script><script src="/styles-51758cceccc934d7ff6d.js" async=""></script><script src="/app-26a6e9f9154084b7a827.js" async=""></script><script>
            $(document).on('click','.navbar-collapse.in',function(e) {
              if( $(e.target).is('a') ) {
                $(this).collapse('hide');
              }
            });
            </script></body></html>